<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>redis6学习 | NeroBlackstone&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.efb332ed.css" as="style"><link rel="preload" href="/assets/js/app.ec2d5af2.js" as="script"><link rel="preload" href="/assets/js/3.e9bff2d3.js" as="script"><link rel="preload" href="/assets/js/22.ae905edc.js" as="script"><link rel="prefetch" href="/assets/js/10.7e730691.js"><link rel="prefetch" href="/assets/js/11.0a8c3a3b.js"><link rel="prefetch" href="/assets/js/12.e41009b6.js"><link rel="prefetch" href="/assets/js/13.615800ed.js"><link rel="prefetch" href="/assets/js/14.9ff2a10b.js"><link rel="prefetch" href="/assets/js/15.c0f3d8e0.js"><link rel="prefetch" href="/assets/js/16.267a81c0.js"><link rel="prefetch" href="/assets/js/17.85b26636.js"><link rel="prefetch" href="/assets/js/18.1172ae07.js"><link rel="prefetch" href="/assets/js/19.02da22ed.js"><link rel="prefetch" href="/assets/js/20.899cfc38.js"><link rel="prefetch" href="/assets/js/21.48a7b777.js"><link rel="prefetch" href="/assets/js/23.145304b2.js"><link rel="prefetch" href="/assets/js/24.fc9aa772.js"><link rel="prefetch" href="/assets/js/25.5370690c.js"><link rel="prefetch" href="/assets/js/26.4092c0ff.js"><link rel="prefetch" href="/assets/js/27.211a8f61.js"><link rel="prefetch" href="/assets/js/28.7b4de4b7.js"><link rel="prefetch" href="/assets/js/29.443848ae.js"><link rel="prefetch" href="/assets/js/30.8fb8f839.js"><link rel="prefetch" href="/assets/js/31.39c4255a.js"><link rel="prefetch" href="/assets/js/32.6e0fb50b.js"><link rel="prefetch" href="/assets/js/33.919f59b2.js"><link rel="prefetch" href="/assets/js/34.2fd50063.js"><link rel="prefetch" href="/assets/js/35.3dfac06e.js"><link rel="prefetch" href="/assets/js/36.a873c79a.js"><link rel="prefetch" href="/assets/js/37.85faec35.js"><link rel="prefetch" href="/assets/js/38.e83fe327.js"><link rel="prefetch" href="/assets/js/39.6be1856f.js"><link rel="prefetch" href="/assets/js/4.78206645.js"><link rel="prefetch" href="/assets/js/40.93ddf935.js"><link rel="prefetch" href="/assets/js/41.88d92bf1.js"><link rel="prefetch" href="/assets/js/42.b3d6f88b.js"><link rel="prefetch" href="/assets/js/43.1c5dc4d4.js"><link rel="prefetch" href="/assets/js/44.195f887c.js"><link rel="prefetch" href="/assets/js/45.9aec365f.js"><link rel="prefetch" href="/assets/js/46.a1714c92.js"><link rel="prefetch" href="/assets/js/47.07f6e748.js"><link rel="prefetch" href="/assets/js/48.edfe58e7.js"><link rel="prefetch" href="/assets/js/5.290e8a5b.js"><link rel="prefetch" href="/assets/js/6.0be4f557.js"><link rel="prefetch" href="/assets/js/7.df8bc73d.js"><link rel="prefetch" href="/assets/js/8.9882d415.js"><link rel="prefetch" href="/assets/js/9.62493693.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.07834b74.js">
    <link rel="stylesheet" href="/assets/css/0.styles.efb332ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout"><nav role="navigation" aria-label="main navigation" class="navbar is-primary is-fixed-top"><div class="navbar-brand"><a href="/" to="/" class="navbar-item router-link-active">
        NeroBlackstone's Blog
    </a><a role="button" aria-label="menu" class="navbar-burger burger"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a></div><div class="navbar-menu"><div class="navbar-start"></div><div class="navbar-end"><a href="/tag/" to="/tag/" class="navbar-item">Tag</a> <a href="/friends/" to="/friends/" class="navbar-item">Friends</a></div></div></nav> <section class="section"><div class="container"><div class="content__default"><h1 id="redis6学习"><a href="#redis6学习" class="header-anchor">#</a> redis6学习</h1> <h2 id="redis可执行文件组成"><a href="#redis可执行文件组成" class="header-anchor">#</a> redis可执行文件组成</h2> <ul><li>redis-benchmark:性能测试</li> <li>redis-check-aof:修复有问题的aof文件</li> <li>redis-check-rdb:修复有问题的rdb</li> <li>redis-sentinel:Redis集群使用</li> <li>redis-server:Redis服务器启动命令</li> <li>redis-cli:客户端，操作入口</li></ul> <h2 id="redis-conf"><a href="#redis-conf" class="header-anchor">#</a> redis.conf</h2> <p>redis.conf是redis的默认配置文件。在macos下，位于<code>/usr/local/etc/redis.conf</code></p> <p>使用当前redis.conf的内容来初始化redis: <code>redis-server redis.conf</code></p> <p>如果不使用redis.conf来初始化redis的启动，redis会开启后会警告 <code>Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf</code> 如果使用redis.conf来初始化，会提示<code>Configuration loaded</code></p> <p>默认redis的启动为用户服务，redis将会把启动信息打印在控制台窗口中，如果关闭这个窗口，redis服务也关闭了。</p> <p>如果将redis.conf文件里面的<code>deamonize no</code> 改成 <code>yes</code>，就可以让redis服务在后台启动。</p> <h2 id="客户端访问redis-server"><a href="#客户端访问redis-server" class="header-anchor">#</a> 客户端访问redis-server</h2> <p>启动客户端，直接执行redis-cli即可,如果需要多个客户端端口去连接redis-server，可以使用<code>redis-cli -p [portNum]</code>实现。</p> <h2 id="测试客户端连接"><a href="#测试客户端连接" class="header-anchor">#</a> 测试客户端连接</h2> <p>在cli中使用<code>ping</code>命令，如果是可以正常响应的，会返回<code>pong</code>。</p> <h2 id="关闭server"><a href="#关闭server" class="header-anchor">#</a> 关闭Server</h2> <p>若cli已经连接，在链接中使用<code>shutdown</code>，即可关闭连接。</p> <p>若没有cli连接server，使用<code>redis-cli shutdown</code>也可以关闭server。</p> <h2 id="默认数据库"><a href="#默认数据库" class="header-anchor">#</a> 默认数据库</h2> <p>redis默认有16个数据库。从0开始，默认使用0号库。</p> <h2 id="切换数据库"><a href="#切换数据库" class="header-anchor">#</a> 切换数据库</h2> <p>使用命令 <code>select &lt;dbid&gt;</code> 即可切换数据库，例如 <code>select 8</code>。</p> <h2 id="密码"><a href="#密码" class="header-anchor">#</a> 密码</h2> <p>redis统一密码库，所有库都是同样的密码。</p> <h2 id="redis6线程更改"><a href="#redis6线程更改" class="header-anchor">#</a> redis6线程更改</h2> <p>redis6之后引入了多线程。但是redis6的多线程默认是禁用的。只使用主线程。若开启要修改redis.conf，<code>io-threads-do-reads yes</code></p> <p>redis6多线程开启后，还需要设置线程数，否则不生效。</p> <p><code>io-threads 4</code></p> <p>线程数一般要小于机器cpu核心数。比如如果是4核那局设置2-3个核心。线程数不是越大越好。</p> <h2 id="redis-数据类型"><a href="#redis-数据类型" class="header-anchor">#</a> redis 数据类型</h2> <p>key-value存储，数据类型:</p> <ul><li><p>string</p></li> <li><p>set</p></li> <li><p>list</p></li> <li><p>hash</p></li> <li><p>zset</p></li> <li><p>keys * :查询当前库的所有键。</p></li> <li><p>exists <key> :判断某个键是否存在(存在返回1，不存在返回0)</key></p></li> <li><p>type <key> :查看键的类型</key></p></li> <li><p>del <key> :删除某个键</key></p></li> <li><p>expire <key><seconds> :为键值设置过期时间，单位为秒</seconds></key></p></li> <li><p>ttl <key> :查看还有多少秒过期，如果-1表示永不过期，-2表示已过期。</key></p></li> <li><p>dbsize :查看当前数据库key的数量</p></li> <li><p>flushdb :清空当前库数据库</p></li> <li><p>flushall :清空全部redis库</p></li></ul> <p>String类型：</p> <ul><li>string是Redis最基本的类型，一个key对应一个value</li> <li>string类型是二进制安全的。意味着redis的string可以包含任何数据。比如jpg图片或者序列化的对象。</li> <li>string类型是redis最基本的数据类型，一个redis中字符串value最多可以是512M</li></ul> <p>匹配partten：</p> <ul><li><ul><li>全查</li></ul></li> <li>? 占位符</li> <li>*[1-2] 以括号里结尾</li></ul></div> <!----></div></section> <footer class="footer" data-v-29777868><div class="level" data-v-29777868><div class="content level-item has-text-centered" data-v-29777868><div class="field is-grouped-multiline is-grouped" data-v-29777868><!----> <div class="control" data-v-29777868><span class="tag is-primary" data-v-29777868><span><a href="https://github.com/NeroBlackstone" class="has-text-white" data-v-29777868><span class="icon" data-v-29777868><i class="fab fa-github" data-v-29777868></i></span></a></span> <!----></span></div> <div class="control" data-v-29777868><a href="https://v1.vuepress.vuejs.org/" data-v-29777868><div class="tags has-addons" data-v-29777868><span class="tag is-dark" data-v-29777868><span>vuepress</span> <!----></span> <span class="tag is-info" data-v-29777868><span>1.5.0</span> <!----></span></div></a></div><div class="control" data-v-29777868><a href="https://buefy.org/" data-v-29777868><div class="tags has-addons" data-v-29777868><span class="tag is-dark" data-v-29777868><span>buefy</span> <!----></span> <span class="tag is-info" data-v-29777868><span>0.8.20</span> <!----></span></div></a></div> <!----></div></div></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ec2d5af2.js" defer></script><script src="/assets/js/3.e9bff2d3.js" defer></script><script src="/assets/js/22.ae905edc.js" defer></script>
  </body>
</html>
