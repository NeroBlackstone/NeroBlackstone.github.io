<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一些常见的Golang命名/编码规范 | NeroBlackstone&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.efb332ed.css" as="style"><link rel="preload" href="/assets/js/app.ec2d5af2.js" as="script"><link rel="preload" href="/assets/js/3.e9bff2d3.js" as="script"><link rel="preload" href="/assets/js/20.899cfc38.js" as="script"><link rel="prefetch" href="/assets/js/10.7e730691.js"><link rel="prefetch" href="/assets/js/11.0a8c3a3b.js"><link rel="prefetch" href="/assets/js/12.e41009b6.js"><link rel="prefetch" href="/assets/js/13.615800ed.js"><link rel="prefetch" href="/assets/js/14.9ff2a10b.js"><link rel="prefetch" href="/assets/js/15.c0f3d8e0.js"><link rel="prefetch" href="/assets/js/16.267a81c0.js"><link rel="prefetch" href="/assets/js/17.85b26636.js"><link rel="prefetch" href="/assets/js/18.1172ae07.js"><link rel="prefetch" href="/assets/js/19.02da22ed.js"><link rel="prefetch" href="/assets/js/21.48a7b777.js"><link rel="prefetch" href="/assets/js/22.ae905edc.js"><link rel="prefetch" href="/assets/js/23.145304b2.js"><link rel="prefetch" href="/assets/js/24.fc9aa772.js"><link rel="prefetch" href="/assets/js/25.5370690c.js"><link rel="prefetch" href="/assets/js/26.4092c0ff.js"><link rel="prefetch" href="/assets/js/27.211a8f61.js"><link rel="prefetch" href="/assets/js/28.7b4de4b7.js"><link rel="prefetch" href="/assets/js/29.443848ae.js"><link rel="prefetch" href="/assets/js/30.8fb8f839.js"><link rel="prefetch" href="/assets/js/31.39c4255a.js"><link rel="prefetch" href="/assets/js/32.6e0fb50b.js"><link rel="prefetch" href="/assets/js/33.919f59b2.js"><link rel="prefetch" href="/assets/js/34.2fd50063.js"><link rel="prefetch" href="/assets/js/35.3dfac06e.js"><link rel="prefetch" href="/assets/js/36.a873c79a.js"><link rel="prefetch" href="/assets/js/37.85faec35.js"><link rel="prefetch" href="/assets/js/38.e83fe327.js"><link rel="prefetch" href="/assets/js/39.6be1856f.js"><link rel="prefetch" href="/assets/js/4.78206645.js"><link rel="prefetch" href="/assets/js/40.93ddf935.js"><link rel="prefetch" href="/assets/js/41.88d92bf1.js"><link rel="prefetch" href="/assets/js/42.b3d6f88b.js"><link rel="prefetch" href="/assets/js/43.1c5dc4d4.js"><link rel="prefetch" href="/assets/js/44.195f887c.js"><link rel="prefetch" href="/assets/js/45.9aec365f.js"><link rel="prefetch" href="/assets/js/46.a1714c92.js"><link rel="prefetch" href="/assets/js/47.07f6e748.js"><link rel="prefetch" href="/assets/js/48.edfe58e7.js"><link rel="prefetch" href="/assets/js/5.290e8a5b.js"><link rel="prefetch" href="/assets/js/6.0be4f557.js"><link rel="prefetch" href="/assets/js/7.df8bc73d.js"><link rel="prefetch" href="/assets/js/8.9882d415.js"><link rel="prefetch" href="/assets/js/9.62493693.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.07834b74.js">
    <link rel="stylesheet" href="/assets/css/0.styles.efb332ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout"><nav role="navigation" aria-label="main navigation" class="navbar is-primary is-fixed-top"><div class="navbar-brand"><a href="/" to="/" class="navbar-item router-link-active">
        NeroBlackstone's Blog
    </a><a role="button" aria-label="menu" class="navbar-burger burger"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a></div><div class="navbar-menu"><div class="navbar-start"></div><div class="navbar-end"><a href="/tag/" to="/tag/" class="navbar-item">Tag</a> <a href="/friends/" to="/friends/" class="navbar-item">Friends</a></div></div></nav> <section class="section"><div class="container"><div class="content__default"><h1 id="一些常见的golang命名-编码规范"><a href="#一些常见的golang命名-编码规范" class="header-anchor">#</a> 一些常见的Golang命名/编码规范</h1> <p>下列命名规范均求证于官方网站<a href="https://golang.org/doc/effective_go.html#package-names" target="_blank" rel="noopener noreferrer">Effective Go<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
及<a href="https://github.com/golang/go/wiki/CodeReviewComments#package-comments" target="_blank" rel="noopener noreferrer">官方github code review规范<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="包名"><a href="#包名" class="header-anchor">#</a> 包名</h2> <p>package使用<strong>小写，单个单词</strong> 的命名。不需要下划线和混合多个单词。</p> <p>可能有人会担心这样很容易重包名，但是包仅仅是导入的默认名称，在源代码中无需独一无二。如果发生冲突，可以局部的使用另一个命名。</p> <p><strong>包名需要和存放包源文件的文件夹名相同</strong> 。在src/encoding/base64中的包以&quot;encoding/base64&quot;的方式导入，包命名为base64, 而不是 encoding_base64或是encodingBase64。</p> <h2 id="包注释"><a href="#包注释" class="header-anchor">#</a> 包注释</h2> <p>在<strong>包名上方必须写一行包注释</strong> 。中间不能有空行。例如</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// Package math provides basic constants and mathematical functions.</span>
<span class="token keyword">package</span> math
</code></pre></div><p>main包的包注释，写上其生成的二进制可执行文件名称。例如，对于文件夹<code>seedgen</code>里的main包，可以这样写注释：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// Program seedgen ...</span>
<span class="token keyword">package</span> main
</code></pre></div><p>注意：包注释不能是以小写单词开头的句子，因为它是公共可见的，所以要用正确的英文。当二进制可执行文件名是包注释的第一个单词，也必须对其大写，即使cli里的调用和包注释的拼写不一致。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// Seedgen ...</span>
<span class="token keyword">package</span> main
</code></pre></div><h2 id="文档注释"><a href="#文档注释" class="header-anchor">#</a> 文档注释</h2> <p>所有顶层，且会导出的命名，都应该具有文档注释。不常见的包内私有函数和类型也应该写好文档注释。</p> <h2 id="构造函数名"><a href="#构造函数名" class="header-anchor">#</a> 构造函数名</h2> <p>如果ring包里有一个类型Ring。通常情况，类型的构造函数会被命名为New+类型名：NewRing()。</p> <p>但在另一种特殊情况下：Ring是ring包导出的唯一类型。并且包名也为ring，那么构造函数可以直接命名为New。用ring.New()来使用构造函数。</p> <h2 id="文件名"><a href="#文件名" class="header-anchor">#</a> 文件名</h2> <p>文件名的命名遵循<strong>和包名同样</strong> 的规范。但又有下列特殊情况。</p> <ol><li>文件名由<code>.</code>或者<code>_</code>开头的话会自动被go tool忽略。</li> <li>文件名以<code>_test.go</code>结束只会被<code>go test</code>工具编译。</li> <li>文件名带有os和处理器架构名只会为指定平台编译。例如name_linux.go只会为linux上构建，name_amd64.go只会为amd64架构的处理器上构建。文件顶部的构建约束注释作用相同。</li></ol> <h2 id="变量名与常量名"><a href="#变量名与常量名" class="header-anchor">#</a> 变量名与常量名</h2> <p>基本守则：变量的命名使用的越广，其名称就越应该清晰具体而有描述性。</p> <p>在go中，对<strong>作用域有限的局部变量</strong> 来说，变量应该短而不是长。。例如使用<code>c</code>来指代<code>lineCounter</code>，用<code>i</code>来指代<code>sliceIndex</code>。循环索引或是reader之类的常见变量也可以是单个字母（i，r）。</p> <p>不常见/全局的变量需要更具描述性的名称。</p> <p><strong>变量使用小写字母驼峰命名。常量使用大写字母驼峰命名</strong> 。如mixedCaps和MixedCaps。</p> <p>变量和常量均不推荐使用下划线来链接多个单词。</p> <h2 id="getter和setter"><a href="#getter和setter" class="header-anchor">#</a> Getter和Setter</h2> <p>Go语言没有内建的Getter和Setter支持（不像kotlin）。在go中自己按需实现getter和setter是通用的做法。但是go中用GetXxxx作为getter名称并不符合规范。</p> <p>如果有一个名为owner（小写，未导出）的字段，那么getter方法应称为Owner（）（大写，导出），而不是GetOwner。而setter函数，命名为SetOwner。</p> <div class="language-go extra-class"><pre class="language-go"><code>owner <span class="token operator">:=</span> obj<span class="token punctuation">.</span><span class="token function">Owner</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> owner <span class="token operator">!=</span> user <span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span><span class="token function">SetOwner</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="接口命名"><a href="#接口命名" class="header-anchor">#</a> 接口命名</h2> <p>按照官方规范，单个方法的接口的命名，是在其方法名后，加上<code>er</code>后缀，或者相似的修饰名的<strong>名词</strong> 。例如：Reader, Writer, Formatter, CloseNotifier。</p> <p>而接口中的方法命名，若标准库中也具有同名方法，例如<code>Read, Write, Close, Flush, String</code>等词，那么如果接口的方法签名与标准库中不同，按照规范，不应该使用相同的名字。相反，如果接口的方法与熟知类型上的方法签名相同，则可以使用相同的名字。例如一个字符转换方法命名为<code>String</code>而不是<code>ToString</code>。</p> <h2 id="接收者命名"><a href="#接收者命名" class="header-anchor">#</a> 接收者命名</h2> <p>方法接受者的命名应该反映其身份。<strong>通常使用一个或两个字母的类型名缩写</strong> 就足够了。例如对Client类型使用&quot;c&quot;或&quot;ci&quot;做为接受者命名。但也要保持一致性，如果已经使用&quot;c&quot;作为接受者的名字，不要再在另一个方法中命名为&quot;ci&quot;。</p> <p>不要使用一些其他oop语言中具有特殊含义的通用命名，例如&quot;me&quot;，&quot;this&quot;,&quot;self&quot;。</p> <h2 id="声明空切片"><a href="#声明空切片" class="header-anchor">#</a> 声明空切片</h2> <p>当声明空切片时：</p> <p>最好使用：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> t <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
</code></pre></div><p>而不是：</p> <div class="language-go extra-class"><pre class="language-go"><code>t <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>前者声明了一个值为nil的切片，而后者值为非nil但长度为0。这两者功能相同，它们的len和cap均为0，但是nil切片是首选。</p> <h2 id="不要使用painc"><a href="#不要使用painc" class="header-anchor">#</a> 不要使用Painc</h2> <p>对普通错误，不要使用panic。使用error和多返回值。</p> <h2 id="错误处理"><a href="#错误处理" class="header-anchor">#</a> 错误处理</h2> <p>不要使用<code>_</code>丢弃错误。如果函数返回错误，请检查它以确保函数成功。处理错误，将其返回，或者在真正异常的情况下使用panic。</p> <h2 id="错误字符串"><a href="#错误字符串" class="header-anchor">#</a> 错误字符串</h2> <p>错误字符串不应该应该是大写（除非以专有名词或缩写开头），或者以标点符号结束。 也就是说，使用<code>fmt.Errorf(&quot;something bad&quot;)</code>而不是<code>fmt.Errorf(&quot;Something bad&quot;)</code>。所以<code>log.Printf(&quot;Reading %s: %v&quot;, filename, err)</code>不会中间突然出一个大写字母。</p> <p>但这不适用于日志，它一般是默认从新行打印。不会在其他消息中合并。</p></div> <!----></div></section> <footer class="footer" data-v-29777868><div class="level" data-v-29777868><div class="content level-item has-text-centered" data-v-29777868><div class="field is-grouped-multiline is-grouped" data-v-29777868><!----> <div class="control" data-v-29777868><span class="tag is-primary" data-v-29777868><span><a href="https://github.com/NeroBlackstone" class="has-text-white" data-v-29777868><span class="icon" data-v-29777868><i class="fab fa-github" data-v-29777868></i></span></a></span> <!----></span></div> <div class="control" data-v-29777868><a href="https://v1.vuepress.vuejs.org/" data-v-29777868><div class="tags has-addons" data-v-29777868><span class="tag is-dark" data-v-29777868><span>vuepress</span> <!----></span> <span class="tag is-info" data-v-29777868><span>1.5.0</span> <!----></span></div></a></div><div class="control" data-v-29777868><a href="https://buefy.org/" data-v-29777868><div class="tags has-addons" data-v-29777868><span class="tag is-dark" data-v-29777868><span>buefy</span> <!----></span> <span class="tag is-info" data-v-29777868><span>0.8.20</span> <!----></span></div></a></div> <!----></div></div></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ec2d5af2.js" defer></script><script src="/assets/js/3.e9bff2d3.js" defer></script><script src="/assets/js/20.899cfc38.js" defer></script>
  </body>
</html>
